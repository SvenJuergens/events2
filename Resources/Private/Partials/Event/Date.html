{namespace e2=JWeiland\Events2\ViewHelpers}

<f:if condition="{0: event.eventType}=={0: 'duration'}">
	<f:then>
		<f:render section="date" arguments="{day: event.eventBegin}" />
		- {event.eventEnd -> f:format.date(format: '%d. %b %Y')}
	</f:then>
	<f:else>
		<f:render section="date" arguments="{day: event.day.day}" />
	</f:else>
</f:if>
<f:render section="time" arguments="{event: event}" />

<f:section name="date">
	{day -> f:format.date(format: '%a %d. %b %Y')}
</f:section>

<f:section name="time">
	<f:alias map="{times: '{e2:getMergedEventTimes(event: event)->f:count()}'}">
		<f:if condition="{times}">
			<f:switch expression="{times}">
				<f:case value="0">&nbsp;</f:case>
				<f:case value="1"><f:alias map="{time: '{e2:getMergedEventTimes(event: event, directReturn: 1)}'}">|&nbsp;<f:translate key="tx_events2_domain_model_time.time_begin"/>: {time.timeBegin}</f:alias></f:case>
				<f:case default="1">
					|&nbsp;<f:translate key="tx_events2_domain_model_time.time_begin"/>:&nbsp;
					<f:link.action action="show" controller="Event" pageUid="{settings.pidOfDetailPage}" arguments="{event: event, day: event.day}" title="{f:translate(key: 'singleView')}">{f:translate(key: 'showDetailview')}</f:link.action>
				</f:case>
			</f:switch>
		</f:if>
	</f:alias>
</f:section>

